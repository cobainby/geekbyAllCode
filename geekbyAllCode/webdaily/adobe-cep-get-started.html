<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Adobe-CEP 插件开发 | 橘子辉煌</title>
    <meta name="description" content="Adobe CEP开发新手入门">
    <link rel="icon" href="/geekbyAllCode/favicon.ico">
    <meta name="keywords" content="adobe cep,cep开发,adobe插件">
    <link rel="preload" href="/geekbyAllCode/assets/css/0.styles.a7b991ab.css" as="style"><link rel="preload" href="/geekbyAllCode/assets/js/app.146977a0.js" as="script"><link rel="preload" href="/geekbyAllCode/assets/js/5.968eba03.js" as="script"><link rel="preload" href="/geekbyAllCode/assets/js/6.f43bf15d.js" as="script"><link rel="preload" href="/geekbyAllCode/assets/js/29.6e5431d1.js" as="script"><link rel="preload" href="/geekbyAllCode/assets/js/11.6808e890.js" as="script"><link rel="preload" href="/geekbyAllCode/assets/js/12.48acaff2.js" as="script"><link rel="preload" href="/geekbyAllCode/assets/js/31.149a0920.js" as="script"><link rel="preload" href="/geekbyAllCode/assets/js/26.8a653a5a.js" as="script"><link rel="preload" href="/geekbyAllCode/assets/js/13.15e7e934.js" as="script"><link rel="preload" href="/geekbyAllCode/assets/js/22.28408e56.js" as="script"><link rel="preload" href="/geekbyAllCode/assets/js/32.2debe235.js" as="script"><link rel="preload" href="/geekbyAllCode/assets/js/15.831c2868.js" as="script"><link rel="preload" href="/geekbyAllCode/assets/js/24.165919d2.js" as="script"><link rel="preload" href="/geekbyAllCode/assets/js/7.df6f6cd0.js" as="script"><link rel="preload" href="/geekbyAllCode/assets/js/53.5b7cc3db.js" as="script"><link rel="preload" href="/geekbyAllCode/assets/js/25.30cc28af.js" as="script"><link rel="prefetch" href="/geekbyAllCode/assets/js/1.7156b6b3.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/10.41c3b195.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/14.0144557f.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/16.bab75164.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/17.7c9e43bc.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/18.79c82570.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/19.41da09eb.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/20.9e676415.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/21.89df60a4.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/23.ba3ffee5.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/27.b65c1256.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/28.1500e43c.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/30.31d1789b.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/33.ebd0717b.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/34.bdb41170.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/35.dc8c9bbc.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/36.e0841c21.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/37.c32624fe.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/38.6f7fc98a.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/39.1bcea226.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/4.d192cd56.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/40.bdd023dd.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/41.11ad99e0.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/42.cc7fa650.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/43.459c71e1.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/44.722e7ce3.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/45.93aac5da.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/46.4ef84d37.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/47.30ab7a51.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/48.aee1e748.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/49.a3f42ba9.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/50.037bd65d.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/51.7a5dd921.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/52.2aefe322.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/54.eecff254.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/55.dec3f309.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/56.48acd93e.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/57.b7e3ea2d.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/58.6d9aa6e3.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/59.45616ce4.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/60.7f8b4a8f.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/61.917505c6.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/8.ca050986.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/9.d21bc3b6.js"><link rel="prefetch" href="/geekbyAllCode/assets/js/vendors~flowchart.f478a3ed.js">
    <link rel="stylesheet" href="/geekbyAllCode/assets/css/0.styles.a7b991ab.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="track-theme"><header class="theme-track--header"><div class="theme-track--navbar"><div class="theme-track--brand"><a href="/geekbyAllCode/" class="theme-track--logo router-link-active"><img src="/geekbyAllCode/images/logo.png"></a></div> <nav class="theme-track--nav-links"><ul><li><a href="/geekbyAllCode/webdaily/.html" class="active">首页</a></li><li><a href="/geekbyAllCode/webdaily/" class="router-link-active active">前端daily</a></li><li><a href="/geekbyAllCode/problems/">疑惑困难</a></li><li><a href="/geekbyAllCode/tools/">工具收藏</a></li><li><a href="/geekbyAllCode/space/">随便</a></li><li><a href="/geekbyAllCode/about.html">关于我</a></li></ul> <div class="nav-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <div class="theme-track--nav-mask" style="display:none;"></div></nav> <div class="theme-track--header-github"><a href="//github.com/cobainby" target="_blank"><i class="iconfont icon-github"></i></a></div> <div class="theme-track--header-search"><div class="search-box"><i class="iconfont icon-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value="" class="search-text"></div> <ul class="search-suggestion" style="display:none;"></ul> <button class="search-btn"><i class="iconfont icon-search"></i></button></div></div></header> <div class="track-them--container"><div class="theme-track--content-wrapper"><img src="https://raw.githubusercontent.com/kuaizi-ai/pic/master/img/Adobe-logo.png" class="theme-track--content-poster"> <p class="theme-track--content-date"><span>Publish: 2019-06-04</span> <span>
        Tags:
        <a href="/geekbyAllCode/tags/cep" class="tag">
          cep
        </a><a href="/geekbyAllCode/tags/前端" class="tag">
          前端
        </a></span></p> <div class="theme-track--content"><div class="sidebar-wrapper"><div><div class="sidebar"> <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Adobe-CEP 插件开发</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/geekbyAllCode/webdaily/adobe-cep-get-started.html#开发插件" class="sidebar-link">开发插件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/geekbyAllCode/webdaily/adobe-cep-get-started.html#目录结构" class="sidebar-link">目录结构</a></li><li class="sidebar-sub-header"><a href="/geekbyAllCode/webdaily/adobe-cep-get-started.html#manifest-xml-项目配置" class="sidebar-link">manifest.xml 项目配置</a></li><li class="sidebar-sub-header"><a href="/geekbyAllCode/webdaily/adobe-cep-get-started.html#开发前端界面" class="sidebar-link">开发前端界面</a></li><li class="sidebar-sub-header"><a href="/geekbyAllCode/webdaily/adobe-cep-get-started.html#编写插件与主程序交互-javascript-代码" class="sidebar-link">编写插件与主程序交互 JavaScript 代码</a></li><li class="sidebar-sub-header"><a href="/geekbyAllCode/webdaily/adobe-cep-get-started.html#后台extendscript-脚本" class="sidebar-link">后台ExtendScript 脚本</a></li><li class="sidebar-sub-header"><a href="/geekbyAllCode/webdaily/adobe-cep-get-started.html#首次运行您的插件" class="sidebar-link">首次运行您的插件</a></li><li class="sidebar-sub-header"><a href="/geekbyAllCode/webdaily/adobe-cep-get-started.html#关于支持node版本" class="sidebar-link">关于支持Node版本</a></li><li class="sidebar-sub-header"><a href="/geekbyAllCode/webdaily/adobe-cep-get-started.html#debug-调试" class="sidebar-link">Debug 调试</a></li></ul></li><li><a href="/geekbyAllCode/webdaily/adobe-cep-get-started.html#基于-vue-开发扩展插件" class="sidebar-link">基于 vue 开发扩展插件</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/geekbyAllCode/webdaily/adobe-cep-get-started.html#插件的安装包构建" class="sidebar-link">插件的安装包构建</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/geekbyAllCode/webdaily/adobe-cep-get-started.html#参考" class="sidebar-link">参考</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div></div></div> <div class="theme-track--content-main"><div class="theme-track--content-meta"><h1>Adobe-CEP 插件开发</h1> <div class="theme-track--github-card"><span><img src="https://github.com/tomieric.png?size=100"></span> <p class="theme-track--content-meta-author"><i class="iconfont icon-home"></i> tomieric</p> <!----></div> <!----></div> <div class="content__default"><h1 id="adobe-cep-插件开发"><a href="#adobe-cep-插件开发" aria-hidden="true" class="header-anchor">#</a> Adobe-CEP  插件开发</h1> <blockquote><p>CEP (公共扩展平台)，为 adobe 云应用创建扩展插件，能运用于Photoshop, Illustrator, InDesign, After Effects等等。</p></blockquote> <ul><li><a href="https://github.com/Adobe-CEP/Getting-Started-guides" target="_blank" rel="noopener noreferrer">Adobe-CEP详细介绍<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>一个 CEP 插件实际上是一个在显示在宿主程序面板窗口中的网页，通过 CEP 提供的接口与宿主程序进行交互。这里要分清 CEP 扩展与宿主应用的关系。所谓宿主，就是载入 CEP 扩展的应用，例如一个运行在 PhotoShop 中的 CEP 扩展，它的宿主程序就是 PhotoShop ，作为宿主程序的 PhotoShop 有很多内置功能，和一个被称为 ExtendScript 的脚本引擎，通过 ExtendScript 脚本引擎能够调用各种 PhotoShop 的内置功能，比如创建一个图层、设置背景颜色等等。要注意的是 CEP 和 ExtendScript  都使用 JavaScript 但是它们分别运行在两个虚拟机中，并不在一个上下文中，所以互相是独立的。
另外，一个 CEP 扩展可以同时被多个宿主运行。</p> <p><img src="https://raw.githubusercontent.com/kuaizi-ai/pic/master/img/71097-0e7f47c8e153f165.png" alt=""></p> <p>Adobe-CEP扩展插件需具备的知识技能点：</p> <ul><li><a href="https://github.com/Adobe-CEP/CEP-Resources" target="_blank" rel="noopener noreferrer">CEP 依赖库<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.adobe.com/devnet/photoshop/scripting.html" target="_blank" rel="noopener noreferrer">ExtendScript for Photoshop<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 语法 API</li> <li>前端知识HTML,CSS,JavaScript,Nodejs</li></ul> <h2 id="开发插件"><a href="#开发插件" aria-hidden="true" class="header-anchor">#</a> 开发插件</h2> <h3 id="目录结构"><a href="#目录结构" aria-hidden="true" class="header-anchor">#</a> 目录结构</h3> <p>首先一个插件的基本目录结构包括以下文件：</p> <p><img src="https://github.com/Adobe-CEP/Getting-Started-guides/raw/master/.meta/readme-assets/extension-structure.png?raw=true" alt="extension-structure"></p> <ul><li><code>/CSXS</code> 主要在该目录下建一个 <code>mainifest.xml</code> 的配置文件</li> <li><code>/client</code> 主要包含前端界面资源，包括 Adobe <code>CSInterface.js</code> 等第三方库</li> <li><code>/host</code> 主要包含 <code>ExtendScript</code> 后台运行文件</li></ul> <h3 id="manifest-xml-项目配置"><a href="#manifest-xml-项目配置" aria-hidden="true" class="header-anchor">#</a> manifest.xml 项目配置</h3> <ul><li><strong>ExtensionBundleId</strong>: 扩展插件运行 ID</li> <li><strong>Extension Id</strong>： 扩展 ID，大部分声明面板归属</li> <li><strong>Host Name &amp; Version</strong>： 支持 <code>Adobe</code> 应用程序的版本 [对照列表]([https://github.com/Adobe-CEP/CEP-Resources/blob/master/CEP_8.x/Documentation/CEP%208.0%20HTML%20Extension%20Cookbook.md#applications-integrated-with-cep](https://github.com/Adobe-CEP/CEP-Resources/blob/master/CEP_8.x/Documentation/CEP 8.0 HTML Extension Cookbook.md#applications-integrated-with-cep))</li> <li><strong>MainPath</strong>: 前端页面入口文件</li> <li><strong>ScriptPath</strong>： 后台文件运行文件入口</li> <li><strong>Menu</strong>： 定义扩展的下拉菜单</li> <li><strong>Size</strong>： 配置扩展的窗口大小</li></ul> <p>大致的配置如下：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ExtensionManifest</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ExtensionBundleId</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ai.kuaizi.www<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ExtensionBundleVersion</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>1.0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Version</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>6.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- MAJOR-VERSION-UPDATE-MARKER --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ExtensionList</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Extension</span> <span class="token attr-name">Id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ai.kuaizi.www<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Version</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>0.1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- 设置扩展 ID--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ExtensionList</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ExecutionEnvironment</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HostList</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- 从 CC 2015 以上版本 --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Host</span> <span class="token attr-name">Name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>PHSP<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Version</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>[16.0,99.9]<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Host</span> <span class="token attr-name">Name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>PHXS<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Version</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>[16.0,99.9]<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>HostList</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LocaleList</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Locale</span> <span class="token attr-name">Code</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>All<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LocaleList</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RequiredRuntimeList</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RequiredRuntime</span> <span class="token attr-name">Name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>CSXS<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Version</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>6.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RequiredRuntimeList</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ExecutionEnvironment</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DispatchInfoList</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Extension</span> <span class="token attr-name">Id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ai.kuaizi.www.cep<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- 为 new_panel 设置属性--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DispatchInfo</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Resources</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MainPath</span><span class="token punctuation">&gt;</span></span>./index.html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MainPath</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- 指定起始载入的网页--&gt;</span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ScriptPath</span><span class="token punctuation">&gt;</span></span>./jsx/main.jsx<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ScriptPath</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CEFCommandLine</span><span class="token punctuation">&gt;</span></span>
                      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Parameter</span><span class="token punctuation">&gt;</span></span>--allow-file-access-from-files<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Parameter</span><span class="token punctuation">&gt;</span></span>
                      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Parameter</span><span class="token punctuation">&gt;</span></span>--allow-file-access<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Parameter</span><span class="token punctuation">&gt;</span></span>
                      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Parameter</span><span class="token punctuation">&gt;</span></span>--enable-nodejs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Parameter</span><span class="token punctuation">&gt;</span></span>
                      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Parameter</span><span class="token punctuation">&gt;</span></span>--mixed-context<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Parameter</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>CEFCommandLine</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Resources</span><span class="token punctuation">&gt;</span></span>

                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Lifecycle</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AutoVisible</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>AutoVisible</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- 设置扩展面板为可视--&gt;</span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>StartOn</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>StartOn</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Lifecycle</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Type</span><span class="token punctuation">&gt;</span></span>Panel<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Type</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- 设置扩展显示为面板模式--&gt;</span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Menu</span><span class="token punctuation">&gt;</span></span>筷子云制作<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Menu</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- 设置扩展标题--&gt;</span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Geometry</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Size</span><span class="token punctuation">&gt;</span></span>  <span class="token comment">&lt;!-- 设置扩展面板尺寸--&gt;</span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Height</span><span class="token punctuation">&gt;</span></span>400<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Height</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Width</span><span class="token punctuation">&gt;</span></span>250<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Width</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Size</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Geometry</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Icons</span><span class="token punctuation">&gt;</span></span>  <span class="token comment">&lt;!-- 设置扩展面板图标--&gt;</span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Icon</span> <span class="token attr-name">Type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Normal<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>./img/ps_logo_light.png<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Icon</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Icon</span> <span class="token attr-name">Type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>DarkNormal<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>./img/ps_logo.png<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Icon</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Icons</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>UI</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DispatchInfo</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Extension</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DispatchInfoList</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Author</span><span class="token punctuation">&gt;</span></span>tomieric<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Author</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- 作者信息--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Abstract</span><span class="token punctuation">&gt;</span></span>tomieric, kuaizi.ai<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Abstract</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- 扩展描述--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ExtensionManifest</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="开发前端界面"><a href="#开发前端界面" aria-hidden="true" class="header-anchor">#</a> 开发前端界面</h3> <p>在 <code>/client</code>  目录新建前端界面的 <code>HTML</code>文件，并引入 <code>CSInterface.js</code> 库文件。如：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Your First Panel<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 1) Simple HTML UI elements to get us started --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Your first panel<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 2) A button --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>open-button<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Open<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 3) Add your script dependencies here, including CEP's CSInterface.js library --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>CSInterface.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>index.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="编写插件与主程序交互-javascript-代码"><a href="#编写插件与主程序交互-javascript-代码" aria-hidden="true" class="header-anchor">#</a> 编写插件与主程序交互 JavaScript 代码</h3> <p>引入 <code>CSInterface.js</code> 库后我们将可以使用它提供的 <code>API</code> 函数进行程序之间的相互调用。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/* 实例化 CSInterface */</span>
<span class="token keyword">var</span> csInterface <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CSInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* 获取到按钮 dom 对象并进行事件监听 */</span>
<span class="token keyword">var</span> openButton <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#open-button&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
openButton<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> openDoc<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* 执行函数与 后台 ExtendScript 脚本进行通信 */</span>
<span class="token keyword">function</span> <span class="token function">openDoc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 调用后台函数openDocument</span>
  csInterface<span class="token punctuation">.</span><span class="token function">evalScript</span><span class="token punctuation">(</span><span class="token string">&quot;openDocument()&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="后台extendscript-脚本"><a href="#后台extendscript-脚本" aria-hidden="true" class="header-anchor">#</a> 后台ExtendScript 脚本</h3> <p>后台脚本与前端界面的脚本稍微不一样，它是基于程序宿主提供的语法函数，比如打开文件，编辑以及导出，甚至可以执行所有程序可运行的操作。</p> <p>比如调用开发一张图片：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 声明 openDocument 函数</span>
<span class="token comment">// 在前端页面可以使用JavaScript 调用csInterface.evalScript(&quot;openDocument()&quot;)</span>
<span class="token keyword">function</span> <span class="token function">openDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> fileRef <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;~/Downloads/myFile.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// app 对象是由 ExtendScript 环境提供的全局变量</span>
  <span class="token keyword">var</span> docRef <span class="token operator">=</span> app<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>fileRef<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="首次运行您的插件"><a href="#首次运行您的插件" aria-hidden="true" class="header-anchor">#</a> 首次运行您的插件</h3> <p>当编写好代码，我们就可以从应用app(Photoshop)中打开</p> <blockquote><p>窗口 &gt; 扩展 &gt; 筷子云制作</p></blockquote> <h3 id="关于支持node版本"><a href="#关于支持node版本" aria-hidden="true" class="header-anchor">#</a> 关于支持Node版本</h3> <p>后台ExtendScript 脚本基于 <code>chromium</code> 内核环境，不同的 <code>app</code> 版本支持不同 <code>Node</code> 版本。详细查看 [chromium-embedded-framework-cef](https://github.com/Adobe-CEP/CEP-Resources/blob/master/CEP_8.x/Documentation/CEP 8.0 HTML Extension Cookbook.md#chromium-embedded-framework-cef)，支持的[API]([https://github.com/Adobe-CEP/CEP-Resources/blob/master/CEP_8.x/Documentation/CEP%208.0%20HTML%20Extension%20Cookbook.md#chromium](https://github.com/Adobe-CEP/CEP-Resources/blob/master/CEP_8.x/Documentation/CEP 8.0 HTML Extension Cookbook.md#chromium))</p> <h3 id="debug-调试"><a href="#debug-调试" aria-hidden="true" class="header-anchor">#</a> Debug 调试</h3> <ul><li>Adobe ExtendScript Tool Kit 工具</li> <li>chrome 开发者工具远程调试</li> <li>插件签名等等</li></ul> <h4 id="关于未签名插件的调试"><a href="#关于未签名插件的调试" aria-hidden="true" class="header-anchor">#</a> 关于未签名插件的调试</h4> <p>在Windows下修改注册表 <code>HKEY_CURRENT_USER/Software/Adobe/CSXS.8</code> 的 <code>PlayerDebugMode</code> 字段设为 <code>1</code>,在Mac下直接在终端工具上输入 <code>defaults write com.adobe.CSXS.8 PlayerDebugMode 1</code></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># windows</span>
<span class="token operator">&gt;</span> REG ADD HKCU\\Software\\Adobe\\CSXS.8 /f /v PlayerDebugMode /t REG_SZ /d 1
<span class="token operator">&gt;</span> REG ADD HKCU\\Software\\Adobe\\CSXS.8 /f /v LogLevel /t REG_SZ /d 6

<span class="token comment"># Mac</span>
<span class="token operator">&gt;</span> defaults <span class="token function">write</span> com.adobe.CSXS.8 PlayerDebugMode 1
<span class="token operator">&gt;</span> defaults <span class="token function">write</span> com.adobe.CSXS.8 LogLevel 6
</code></pre></div><h4 id="远程调试"><a href="#远程调试" aria-hidden="true" class="header-anchor">#</a> 远程调试</h4> <p>在插件的目录新建 <code>.debug</code> 文件即可开启远程调试 (Remote Debugging)，编辑 <code>.debug</code></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ExtensionList</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Extension</span> <span class="token attr-name">Id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com.adobe.CEPHTMLTEST.Panel1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HostList</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Host</span> <span class="token attr-name">Name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>PHXS<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Port</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>8900<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Host</span> <span class="token attr-name">Name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>IDSN<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Port</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>8901<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>HostList</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Extension</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Extension</span> <span class="token attr-name">Id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com.adobe.CEPHTMLTEST.ModalDialog<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HostList</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Host</span> <span class="token attr-name">Name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>PHXS<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Port</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>8920<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Host</span> <span class="token attr-name">Name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>IDSN<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Port</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>8921<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>HostList</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Extension</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ExtensionList</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><a href="http://localhost:8900" target="_blank" rel="noopener noreferrer">http://localhost:8900/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><img src="https://raw.githubusercontent.com/kuaizi-ai/pic/master/img/remote-debug.png" alt=""></p> <h4 id="extendscript-调试"><a href="#extendscript-调试" aria-hidden="true" class="header-anchor">#</a> ExtendScript 调试</h4> <p>Adobe ExtendScript Toolkit CC  工具可以直接调试 <code>ExtendScript</code> 后台代码，在里面可以编辑 ExtendScript  并让其在指定的宿主应用中运行，而且重要的是可以通过 Data Browser 查看实时查看宿主应用的 DOM。</p> <p><img src="https://raw.githubusercontent.com/kuaizi-ai/pic/master/img/extend-script.png" alt=""></p> <h2 id="基于-vue-开发扩展插件"><a href="#基于-vue-开发扩展插件" aria-hidden="true" class="header-anchor">#</a> 基于 vue 开发扩展插件</h2> <p>使用 <code>@kuaizi/vue-cli-plugin-cep</code>插件为 <code>vue</code> 项目创建模板。首先使用 <code>vue-cli</code> 创建项目。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> vue create demo-cep
<span class="token operator">&gt;</span> <span class="token function">cd</span> demo-cep
<span class="token operator">&gt;</span> vue <span class="token function">add</span> @kuaizi/vue-cli-plugin-cep
<span class="token operator">&gt;</span> <span class="token function">yarn</span> serve
</code></pre></div><p><img src="https://raw.githubusercontent.com/kuaizi-ai/pic/master/img/vue.png" alt=""></p> <p>基本插件文件夹 <code>/public/cep</code>, 使用软链映射到 <code>C:\Users\tommyshao\AppData\Roaming\Adobe\CEP\extensions</code> , 前端入口界面做链接跳转:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>zh-CN<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>width=device-width,initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>&lt;%= options.name %&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
      window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">&quot;http://localhost:8080&quot;</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>成功案例：筷子云制作</p> <p><img src="https://raw.githubusercontent.com/kuaizi-ai/pic/master/img/kuaizi-cloud.jpg" alt=""></p> <h2 id="插件的安装包构建"><a href="#插件的安装包构建" aria-hidden="true" class="header-anchor">#</a> 插件的安装包构建</h2> <p>使用 <code>electron</code> 分别打包成 <code>windows</code> 和 <code>Mac</code>的插件安装包程序。</p> <p>安装程序主要的执行代码：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">'use strict'</span>

<span class="token keyword">const</span> electron <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs-extra'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>

<span class="token comment">// Module to control application life.</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> electron<span class="token punctuation">.</span>app
<span class="token comment">// Module to create native browser window.</span>
<span class="token keyword">const</span> BrowserWindow <span class="token operator">=</span> electron<span class="token punctuation">.</span>BrowserWindow

<span class="token comment">// Keep a global reference of the window object, if you don't, the window will</span>
<span class="token comment">// be closed automatically when the JavaScript object is garbage collected.</span>
<span class="token keyword">let</span> mainWindow

<span class="token keyword">const</span> appName <span class="token operator">=</span> <span class="token string">'../dist/me.tomieric.www'</span>

<span class="token keyword">function</span> <span class="token function">createWindow</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Create the browser window.</span>
  mainWindow <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span><span class="token punctuation">{</span>width<span class="token punctuation">:</span> <span class="token number">550</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token number">500</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// and load the index.html of the app.</span>
  mainWindow<span class="token punctuation">.</span><span class="token function">loadURL</span><span class="token punctuation">(</span><span class="token string">'file://'</span> <span class="token operator">+</span> __dirname <span class="token operator">+</span> <span class="token string">'/index.html'</span><span class="token punctuation">)</span>

  mainWindow<span class="token punctuation">.</span>webContents<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'did-finish-load'</span><span class="token punctuation">,</span> installPlugin<span class="token punctuation">)</span>

  <span class="token comment">// Emitted when the window is closed.</span>
  mainWindow<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'closed'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Dereference the window object, usually you would store windows</span>
    <span class="token comment">// in an array if your app supports multi windows, this is the time</span>
    <span class="token comment">// when you should delete the corresponding element.</span>
    mainWindow <span class="token operator">=</span> <span class="token keyword">null</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">installPlugin</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> baseBath
  <span class="token keyword">let</span> installPath

  <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>platform <span class="token operator">===</span> <span class="token string">'darwin'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 测试不能加载插件</span>
    <span class="token comment">// baseBath = process.env['HOME'] + '/Library/Application Support/Adobe/'</span>
    baseBath <span class="token operator">=</span> <span class="token string">'/Library/Application Support/Adobe/'</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    baseBath <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">[</span><span class="token string">'USERPROFILE'</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'/AppData/Roaming/Adobe/'</span>
  <span class="token punctuation">}</span>

  installPath <span class="token operator">=</span> baseBath <span class="token operator">+</span> <span class="token string">'CEP/extensions/'</span> <span class="token operator">+</span> appName <span class="token operator">+</span> <span class="token string">'/'</span>
  <span class="token function">movePlugin</span><span class="token punctuation">(</span>installPath<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">movePlugin</span> <span class="token punctuation">(</span><span class="token parameter">installPath</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  fs<span class="token punctuation">.</span><span class="token function">emptyDir</span><span class="token punctuation">(</span>installPath<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">mkdirErr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// path exists unless there was an error</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>mkdirErr<span class="token punctuation">)</span>

    fs<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> appName<span class="token punctuation">)</span><span class="token punctuation">,</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>installPath<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token string">'loaded'</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        message <span class="token operator">=</span> err
      <span class="token punctuation">}</span>
      mainWindow<span class="token punctuation">.</span>webContents<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'status'</span><span class="token punctuation">,</span> message<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// This method will be called when Electron has finished</span>
<span class="token comment">// initialization and is ready to create browser windows.</span>
app<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'ready'</span><span class="token punctuation">,</span> createWindow<span class="token punctuation">)</span>

<span class="token comment">// Quit when all windows are closed.</span>
app<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'window-all-closed'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  app<span class="token punctuation">.</span><span class="token function">quit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'activate'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// On OS X it's common to re-create a window in the app when the</span>
  <span class="token comment">// dock icon is clicked and there are no other windows open.</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>mainWindow <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">createWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><h2 id="参考"><a href="#参考" aria-hidden="true" class="header-anchor">#</a> 参考</h2> <ul><li><a href="http://nullice.com/archives/category/note/%E8%BD%AF%E4%BB%B6%E6%95%99%E7%A8%8B/adobe-cep" target="_blank" rel="noopener noreferrer">adobe-cep插件教程<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/Kuaizi-co/cep-awesome" target="_blank" rel="noopener noreferrer">cep-awesome<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/Adobe-CEP" target="_blank" rel="noopener noreferrer">Adobe-CEP<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <p class="theme-track--content-page"><!----> <a href="/geekbyAllCode/webdaily/node-package-manager.html" class="next">
            前端模块包管理
            <i class="iconfont icon-next"></i></a></p> <div id="comment-container"><div class="gt-container"><div class="gt-initing"><i class="gt-loader"></i> <p class="gt-initing-text">Gitalking ...</p></div> <!----> <!----> <div><div class="gt-header"><a class="gt-avatar-github"><span class="gt-ico gt-ico-github"><span class="gt-svg"><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M64 524C64 719.602 189.356 885.926 364.113 947.017 387.65799 953 384 936.115 384 924.767L384 847.107C248.118 863.007 242.674 773.052 233.5 758.001 215 726.501 171.5 718.501 184.5 703.501 215.5 687.501 247 707.501 283.5 761.501 309.956 800.642 361.366 794.075 387.658 787.497 393.403 763.997 405.637 743.042 422.353 726.638 281.774 701.609 223 615.67 223 513.5 223 464.053 239.322 418.406 271.465 381.627 251.142 320.928 273.421 269.19 276.337 261.415 334.458 256.131 394.888 302.993 399.549 306.685 432.663 297.835 470.341 293 512.5 293 554.924 293 592.81 297.896 626.075 306.853 637.426 298.219 693.46 258.054 747.5 262.966 750.382 270.652 772.185 321.292 753.058 381.083 785.516 417.956 802 463.809 802 513.5 802 615.874 742.99 701.953 601.803 726.786 625.381 750.003 640 782.295 640 818.008L640 930.653C640.752 939.626 640 948.664978 655.086 948.665 832.344 888.962 960 721.389 960 524 960 276.576 759.424 76 512 76 264.577 76 64 276.576 64 524Z"></path>
</svg>
</span> <!----></span></a> <div class="gt-header-comment"><textarea placeholder="Leave a comment" class="gt-header-textarea"></textarea> <div class="gt-header-preview markdown-body hide"></div> <div class="gt-header-controls"><a href="https://guides.github.com/features/mastering-markdown/" target="_blank" class="gt-header-controls-tip"><span class="gt-ico gt-ico-tip"><span class="gt-svg"><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M512 366.949535c-16.065554 0-29.982212 13.405016-29.982212 29.879884l0 359.070251c0 16.167882 13.405016 29.879884 29.982212 29.879884 15.963226 0 29.879884-13.405016 29.879884-29.879884L541.879884 396.829419C541.879884 380.763865 528.474868 366.949535 512 366.949535L512 366.949535z"
    p-id="3083"></path>
  <path d="M482.017788 287.645048c0-7.776956 3.274508-15.553912 8.80024-21.181973 5.525732-5.525732 13.302688-8.80024 21.181973-8.80024 7.776956 0 15.553912 3.274508 21.079644 8.80024 5.525732 5.62806 8.80024 13.405016 8.80024 21.181973 0 7.776956-3.274508 15.656241-8.80024 21.181973-5.525732 5.525732-13.405016 8.697911-21.079644 8.697911-7.879285 0-15.656241-3.274508-21.181973-8.697911C485.292295 303.301289 482.017788 295.524333 482.017788 287.645048L482.017788 287.645048z"
    p-id="3084"></path>
  <path d="M512 946.844409c-239.8577 0-434.895573-195.037873-434.895573-434.895573 0-239.8577 195.037873-434.895573 434.895573-434.895573 239.755371 0 434.895573 195.037873 434.895573 434.895573C946.895573 751.806535 751.755371 946.844409 512 946.844409zM512 126.17088c-212.740682 0-385.880284 173.037274-385.880284 385.777955 0 212.740682 173.037274 385.777955 385.880284 385.777955 212.740682 0 385.777955-173.037274 385.777955-385.777955C897.777955 299.208154 724.740682 126.17088 512 126.17088z"
    p-id="3085"></path>
</svg>
</span> <span class="gt-ico-text">Markdown is supported</span></span></a> <!----> <button class="gt-btn gt-btn-preview"><span class="gt-btn-text">Preview</span> <!----></button> <button class="gt-btn gt-btn-login"><span class="gt-btn-text">Login with GitHub</span> <!----></button></div></div></div> <div class="gt-comments"><span></span> <p class="gt-comments-null">
          Be the first guy leaving a comment!
      </p> <!----></div></div></div></div></div></div></div></div> <div class="theme-track--footer"><p>MIT Licensed | Copyright © 2018-present</p> <p>
  Powered by vuepress theme <a href="//github.com/tomieric/vuepress-theme-track" target="_blank">Track</a>.
  Inspired by <a href="//github.com/Yubisaki/vuepress-theme-yubisaki" target="_blank">yubisaki</a></p></div></div><div class="global-ui"><!----></div></div>
    <script src="/geekbyAllCode/assets/js/app.146977a0.js" defer></script><script src="/geekbyAllCode/assets/js/5.968eba03.js" defer></script><script src="/geekbyAllCode/assets/js/6.f43bf15d.js" defer></script><script src="/geekbyAllCode/assets/js/29.6e5431d1.js" defer></script><script src="/geekbyAllCode/assets/js/11.6808e890.js" defer></script><script src="/geekbyAllCode/assets/js/12.48acaff2.js" defer></script><script src="/geekbyAllCode/assets/js/31.149a0920.js" defer></script><script src="/geekbyAllCode/assets/js/26.8a653a5a.js" defer></script><script src="/geekbyAllCode/assets/js/13.15e7e934.js" defer></script><script src="/geekbyAllCode/assets/js/22.28408e56.js" defer></script><script src="/geekbyAllCode/assets/js/32.2debe235.js" defer></script><script src="/geekbyAllCode/assets/js/15.831c2868.js" defer></script><script src="/geekbyAllCode/assets/js/24.165919d2.js" defer></script><script src="/geekbyAllCode/assets/js/7.df6f6cd0.js" defer></script><script src="/geekbyAllCode/assets/js/53.5b7cc3db.js" defer></script><script src="/geekbyAllCode/assets/js/25.30cc28af.js" defer></script>
  </body>
</html>
